<!DOCTYPE html>
<html lang="en">
  <meta http-equiv="content-type" content="text/html;charset=UTF-8" />
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="keywords" content="dashboard" />
    <meta name="robots" content="index, follow" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <meta property="og:image" content="social-image.html" />
    <meta name="format-detection" content="telephone=no" />
    <title>
      Benue State Integrated Residents/Citizens Identity/Indigeneship
      Registration and Card Issuance Management System
    </title>
    <!-- Favicon icon -->
    <link
      rel="icon"
      type="image/png"
      sizes="16x16"
      href="/assets/images/gov-logo.jpg"
    />
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
    <link
      rel="stylesheet"
      href="//cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"
    />
    <link
      href="vendor/bootstrap-select/dist/css/bootstrap-select.min.css"
      rel="stylesheet"
    />
    <link href="css/style.css" rel="stylesheet" />
    <link
      rel="stylesheet"
      href="../../cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"
    />
    <script src="../../unpkg.com/sweetalert%402.1.2/dist/sweetalert.min.js"></script>
    <link href="vendor/sweetalert2/dist/sweetalert2.min.css" rel="stylesheet" />
    <script src="../../ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
  </head>
  <body>
    <!--*******************
        Preloader start
    ********************-->
    <div id="preloader">
      <div class="sk-three-bounce">
        <div class="sk-child sk-bounce1"></div>
        <div class="sk-child sk-bounce2"></div>
        <div class="sk-child sk-bounce3"></div>
      </div>
    </div>
    <!--*******************
        Preloader end
    ********************-->

    <!--**********************************
        Main wrapper start
    ***********************************-->
    <div id="main-wrapper">
      <!--**********************************
            Nav header start
        ***********************************-->
      <div class="nav-header">
        <!-- Logo Section -->
        <a href="index.html" class="brand-logo">
          <img
            src="/assets/images/benue-state-logo.png"
            alt="Government Logo"
            class="logo-img"
          />
          <div class="brand-text">BIRCIIRCIMS</div>
        </a>

        <!-- Hamburger Menu for Navigation Control -->
        <div class="nav-control">
          <div class="hamburger">
            <span class="line"></span><span class="line"></span
            ><span class="line"></span>
          </div>
        </div>
      </div>
      <!--**********************************
            Nav header end
        ***********************************-->

      <!--**********************************
            Header start
        ***********************************-->
      <div class="header">
        <div class="header-content">
          <nav class="navbar navbar-expand">
            <div class="collapse navbar-collapse justify-content-between">
              <div class="header-left">
                <div class="dashboard_bar">Profile</div>
              </div>
              <!-- <ul class="navbar-nav header-right">
                <li class="nav-item dropdown notification_dropdown">
                  <div class="input-group search-area">
                    <input
                      type="text"
                      class="form-control"
                      placeholder="Search here..."
                    />
                    <span class="input-group-text"
                      ><a href="javascript:void(0)"
                        ><i class="flaticon-381-search-2"></i></a
                    ></span>
                  </div>
                </li>
              </ul> -->
            </div>
          </nav>
        </div>
      </div>
      <!--**********************************
            Header end ti-comment-alt
        ***********************************-->

      <!--**********************************
            Sidebar start
        ***********************************-->
      <div class="deznav">
        <div class="deznav-scroll">
          <ul class="metismenu" id="menu">
            <li>
              <style type="text/css">
                a.gflag {
                  vertical-align: middle;
                  font-size: 16px;
                  padding: 1px 0;
                  background-repeat: no-repeat;
                  background-image: url(../../gtranslate.net/flags/16.png);
                }
                a.gflag img {
                  border: 0;
                }
                a.gflag:hover {
                  background-image: url(../../gtranslate.net/flags/16a.png);
                }
                #goog-gt-tt {
                  display: none !important;
                }
                .goog-te-banner-frame {
                  display: none !important;
                }
                .goog-te-menu-value:hover {
                  text-decoration: none !important;
                }
                body {
                  top: 0 !important;
                }
                #google_translate_element2 {
                  display: none !important;
                }
              </style>
            </li>
            <!-- Super Admin Menu -->
            <li class="super-admin-menu">
              <a class="ai-icon" href="index.html" aria-expanded="false">
                <i class="flaticon-381-networking"></i>
                <span class="nav-text">Dashboard</span>
              </a>
            </li>
            <!-- user Menu -->
            <li class="user-menu">
              <a
                class="ai-icon"
                href="user-dasboard.html"
                aria-expanded="false"
              >
                <i class="flaticon-381-networking"></i>
                <span class="nav-text">Dashboard</span>
              </a>
            </li>
            <li class="super-admin-menu">
              <a class="ai-icon" href="approvals.html" aria-expanded="false">
                <i class="fa fa-exchange" aria-hidden="true"></i>
                <span class="nav-text">Approvals</span>
              </a>
            </li>

            <li class="user-menu">
              <a class="ai-icon" href="request.html" aria-expanded="false">
                <i class="fa fa-money" aria-hidden="true"></i>
                <span class="nav-text">View Certificate Status</span>
              </a>
            </li>
            <li class="user-menu">
              <a class="ai-icon" href="idcard.html" aria-expanded="false">
                <i class="fa fa-money" aria-hidden="true"></i>
                <span class="nav-text">View Card Status</span>
              </a>
            </li>

            <li class="super-admin-menu">
              <a class="ai-icon" href="all-request.html" aria-expanded="false">
                <i class="fa fa-money" aria-hidden="true"></i>
                <span class="nav-text">View All Request</span>
              </a>
            </li>
            <!-- Super Admin Menu -->
            <li class="super-admin-menu">
              <a class="ai-icon" href="citizens.html" aria-expanded="false">
                <i class="fa fa-arrows-h"></i>
                <span class="nav-text">All Citizens</span>
              </a>
            </li>
            <!-- User-menu -->
            <li class="user-menu">
              <a class="ai-icon" href="certificate.html" aria-expanded="false">
                <i class="fa fa-user-plus" aria-hidden="true"></i>
                <span class="nav-text">Request Certificate</span>
              </a>
            </li>

            <li class="user-menu">
              <a class="ai-icon" href="card.html" aria-expanded="false">
                <i class="fa fa-user-plus" aria-hidden="true"></i>
                <span class="nav-text">Request Card</span>
              </a>
            </li>

            <li>
              <a class="ai-icon" href="profile.html" aria-expanded="false">
                <i class="fa fa-user" aria-hidden="true"></i>
                <span class="nav-text">User Account</span>
              </a>
            </li>
            <li class="super-admin-menu">
              <a class="ai-icon" href="transaction.html" aria-expanded="false">
                <i class="flaticon-381-networking"></i>
                <span class="nav-text">transactions</span>
              </a>
            </li>
            <li>
              <a class="ai-icon" href="/auth/login.html" aria-expanded="false">
                <i class="fa fa-sign-out" aria-hidden="true"></i>
                <span class="nav-text" onclick="logout(this)">Logout</span>
              </a>
            </li>
          </ul>
          <div class="copyright">
            <p>Powered By BDIC <br />Â© 2025 All Rights Reserved</p>
            <p class="op5"></p>
          </div>
        </div>
      </div>
      <!--**********************************
            Sidebar end
        ***********************************-->

      <!--**********************************
            Content body start
        ***********************************-->
      <div class="content-body">
        <div class="container-fluid">
          <!-- row -->
          <div class="row">
            <div class="col-xl-12 col-lg-12">
              <div class="card card-bx m-b30">
                <div class="card-header d-flex justify-content-between">
                  <h4 class="card-title">Profile Details</h4>
                </div>
                <form
                  class="profile-form"
                  id="indigeneForm"
                  enctype="multipart/form-data"
                >
                  <div class="card-body">
                    <div class="row">
                      <div class="col-sm-4 m-b30">
                        <label class="form-label">First Name</label>
                        <input
                          type="text"
                          class="form-control"
                          name="firstname"
                          id="first_name"
                          value="firstname"
                          readonly
                        />
                      </div>
                      <div class="col-sm-4 m-b30">
                        <label class="form-label">middlename</label>
                        <input
                          id="middlename"
                          type="text"
                          class="form-control"
                          name="middlename"
                          readonly
                        />
                      </div>
                      <div class="col-sm-4 m-b30">
                        <label class="form-label">Lastname</label>
                        <input
                          id="lastname"
                          type="text"
                          value="lastname"
                          name="lastname"
                          class="form-control"
                          readonly
                        />
                      </div>
                      <div class="col-sm-4 m-b30">
                        <label class="form-label">Email</label>
                        <input
                          type="email"
                          class="form-control"
                          id="email"
                          name="email"
                          required
                          readonly
                        />
                      </div>

                      <div class="col-sm-4 m-b30">
                        <label class="form-label">Mobile Number</label>
                        <input
                          id="phone"
                          type="text"
                          class="form-control"
                          required
                          name="phone"
                          readonly
                        />
                      </div>
                      <div class="col-sm-4 m-b30">
                        <label class="form-label">Gender</label>
                        <select
                          id="gender"
                          name="gender"
                          required
                          class="selectpicker nice-select default-select form-control wide mh-auto"
                        >
                          <option value="Male">Male</option>
                          <option value="Female">Female</option>
                        </select>
                      </div>
                      <div class="col-sm-4 m-b30">
                        <label class="form-label">Marital Status</label>
                        <select
                          id="maritalStatus"
                          name="maritalStatus"
                          required
                          class="selectpicker nice-select default-select form-control wide mh-auto"
                        >
                          <option value="single ">Single</option>
                          <option value="married">Married</option>
                          <option value="divorced">Divorced</option>
                          <option value="widowed">Widowed</option>
                        </select>
                      </div>
                      <div class="col-sm-4 m-b30">
                        <label class="form-label">State Of Origin</label>
                        <input
                          id="stateOfOrigin"
                          type="text"
                          class="form-control"
                          required
                          name="stateOfOrigin"
                          readonly
                        />
                      </div>
                      <div class="col-sm-4 m-b30">
                        <label class="form-label">Date Of Birth</label>

                        <!-- readonly -->
                        <!-- required -->
                        <input
                          id="DOB"
                          type="date"
                          class="form-control"
                          name="DOB"
                          min="1900-01-01"
                        />
                      </div>
                      <div class="col-sm-4 m-b30">
                        <label class="form-label">Local Government</label>
                        <input
                          id="lgaOfOrigin"
                          type="text"
                          class="form-control"
                          required
                          name="lgaOfOrigin"
                          readonly
                        />
                      </div>

                      <div class="col-sm-4 m-b30">
                        <label class="form-label">Address</label>
                        <!-- readonly -->
                        <input
                          id="address"
                          type="text"
                          class="form-control"
                          required
                          name="address"
                        />
                      </div>

                      <div class="col-sm-4 m-b30">
                        <label class="form-label">Community/Ward</label>
                        <input
                          id="community"
                          type="text"
                          class="form-control"
                          required
                          name="ward"
                        />
                      </div>
                      <div class="col-sm-4 m-b30">
                        <label class="form-label">Kindred</label>
                        <input
                          id="kindred"
                          type="text"
                          class="form-control"
                          name="kindred"
                          required
                        />
                      </div>

                      <h4 class="card-title">Parent/Guardian Information</h4>
                      <div class="col-sm-4 m-b30">
                        <label class="form-label">Fatherâs Name</label>
                        <input
                          id="fathersName"
                          type="text"
                          class="form-control"
                          required
                          name="fathersName"
                          required
                        />
                      </div>
                      <div class="col-sm-4 m-b30">
                        <label class="form-label">Motherâs Name</label>
                        <input
                          id="mothersName"
                          type="text"
                          class="form-control"
                          required
                          name="mothersName"
                          required
                        />
                      </div>
                      <div class="col-sm-4 m-b30">
                        <label class="form-label"
                          >Guardianâs Name (if applicable):</label
                        >
                        <input
                          id="guardian"
                          type="text"
                          class="form-control"
                          name="guardian"
                        />
                      </div>

                      <div class="col-sm-4 m-b30">
                        <label class="form-label"
                          >Fatherâs State of Origin</label
                        >
                        <!-- class="form-select" -->
                        <select
                          id="fathersStateOfOrigin"
                          name="fathersStateOfOrigin"
                          required
                          class="selectpicker nice-select default-select form-control wide mh-auto"
                        >
                          <option value="">Select State</option>
                          <option value="adamawa">Adamawa</option>
                          <option value="akwa_ibom">Akwa Ibom</option>
                          <option value="anambra">Anambra</option>
                          <option value="abia">Abia</option>
                          <option value="bauchi">Bauchi</option>
                          <option value="benue">Benue</option>
                          <option value="borno">Borno</option>
                          <option value="bayelsa">Bayelsa</option>
                          <option value="delta">Delta</option>
                          <option value="ebonyi">Ebonyi</option>
                          <option value="edo">Edo</option>
                          <option value="enugu">Enugu</option>
                          <option value="abuja">abuja</option>
                          <option value="gombe">Gombe</option>
                          <option value="jigawa">Jigawa</option>
                          <option value="ekiti">Ekiti</option>
                          <option value="lagos">Lagos</option>
                          <option value="oyo">Oyo</option>
                          <option value="imo">Imo</option>
                          <option value="kaduna">Kaduna</option>
                          <option value="kebbi">Kebbi</option>
                          <option value="kano">Kano</option>
                          <option value="kogi">Kogi</option>
                          <option value="osun">Osun</option>
                          <option value="sokoto">Sokoto</option>
                          <option value="plateau">Plateau</option>
                          <option value="taraba">Taraba</option>
                          <option value="yobe">Yobe</option>
                          <option value="zamfara">zamfara</option>
                          <option value="katsina">Katsina</option>
                          <option value="kwara">Kwara</option>
                          <option value="nasarawa">Nasarawa</option>
                          <option value="niger">Niger</option>
                          <option value="rivers">Rivers</option>
                        </select>
                      </div>

                      <div class="col-sm-4 m-b30">
                        <label class="form-label"
                          >Motherâs State of Origin</label
                        >
                        <!-- class="form-select" -->
                        <select
                          id="mothersStateOfOrigin"
                          name="mothersStateOfOrigin"
                          required
                          class="selectpicker nice-select default-select form-control wide mh-auto"
                        >
                          <option value="">Select State</option>
                          <option value="adamawa">Adamawa</option>
                          <option value="akwa_ibom">Akwa Ibom</option>
                          <option value="anambra">Anambra</option>
                          <option value="abia">Abia</option>
                          <option value="bauchi">Bauchi</option>
                          <option value="benue">Benue</option>
                          <option value="borno">Borno</option>
                          <option value="bayelsa">Bayelsa</option>
                          <option value="delta">Delta</option>
                          <option value="ebonyi">Ebonyi</option>
                          <option value="edo">Edo</option>
                          <option value="enugu">Enugu</option>
                          <option value="abuja">abuja</option>
                          <option value="gombe">Gombe</option>
                          <option value="jigawa">Jigawa</option>
                          <option value="ekiti">Ekiti</option>
                          <option value="lagos">Lagos</option>
                          <option value="oyo">Oyo</option>
                          <option value="imo">Imo</option>
                          <option value="kaduna">Kaduna</option>
                          <option value="kebbi">Kebbi</option>
                          <option value="kano">Kano</option>
                          <option value="kogi">Kogi</option>
                          <option value="osun">Osun</option>
                          <option value="sokoto">Sokoto</option>
                          <option value="plateau">Plateau</option>
                          <option value="taraba">Taraba</option>
                          <option value="yobe">Yobe</option>
                          <option value="zamfara">zamfara</option>
                          <option value="katsina">Katsina</option>
                          <option value="kwara">Kwara</option>
                          <option value="nasarawa">Nasarawa</option>
                          <option value="niger">Niger</option>
                          <option value="rivers">Rivers</option>
                        </select>
                      </div>

                      <div class="col-sm-4 m-b30">
                        <label class="form-label"
                          >Relationship to Guardian</label
                        >
                        <input
                          id="relationshionToguardian"
                          type="text"
                          class="form-control"
                          name="relationshionToguardian"
                        />
                      </div>
                      <h4 class="card-title">Supporting Documents</h4>
                      <div class="col-sm-4 m-b30">
                        <label class="form-label"
                          >Birth Certificate or Declaration of Age</label
                        >
                        <input
                          type="file"
                          class="form-control"
                          required
                          name="files"
                        />
                      </div>

                      <div class="col-sm-4 m-b30">
                        <label class="form-label"
                          >National Identification Number (NIN) Slip or ID
                          Card</label
                        >
                        <input
                          type="file"
                          class="form-control"
                          required
                          name="files"
                        />
                      </div>
                      <div class="col-sm-4 m-b30">
                        <label class="form-label"
                          >Recent Passport Photograph
                        </label>
                        <input
                          type="file"
                          class="form-control"
                          required
                          name="files"
                        />
                      </div>
                      <div class="col-sm-4 m-b30">
                        <label class="form-label">
                          Parent/Guardianâs Indigene Certificate
                        </label>
                        <input
                          type="file"
                          class="form-control"
                          required
                          name="files"
                        />
                      </div>

                      <!-- <h4 class="card-title">Certificate Purpose:</h4> -->
                    </div>
                  </div>
                  <div class="card-footer">
                    <button
                      type="submit"
                      class="btn"
                      style="background-color: #2c6e49; color: #fff"
                    >
                      Request Certificate
                    </button>
                  </div>
                </form>
              </div>
            </div>
          </div>
        </div>
        <script
          src="../../code.tidio.co_443/bpnp4xkz2axqrebqxcezgdca9yot1iyn.js"
          async
        ></script>
        <script>
          function logout() {
            localStorage.removeItem("token");
          }
        </script>

        <script>
          $(document).ready(function () {
            $("#indigeneForm").on("submit", async function (e) {
              e.preventDefault();

              try {
                // Retrieve user authentication data
                const userData = JSON.parse(localStorage.getItem("token"));
                if (!userData?.token || !userData?.user?.id) {
                  Swal.fire("Error", "User authentication failed!", "error");
                  return;
                }

                const { token, user } = userData;
                const formData = new FormData(this);
                formData.append("userId", user.id);

                // Submit form data
                const response = await $.ajax({
                  url: `${BACKEND_URL}/indigene/certificate/create`,
                  type: "POST",
                  data: formData,
                  processData: false,
                  contentType: false,
                  headers: { Authorization: `Bearer ${token}` },
                });

                if (response && response._id) {
                  Swal.fire(
                    "Application Submitted",
                    "Your attestation letter is being prepared.",
                    "success"
                  ).then(async () => {
                    try {
                      // Make a request to get the file blob
                      const fileResponse = await fetch(
                        `${BACKEND_URL}/indigene/certificate/download/attestation/${response._id}`,
                        {
                          method: "GET",
                          headers: { Authorization: `Bearer ${token}` },
                        }
                      );

                      if (!fileResponse.ok) {
                        throw new Error("Failed to download file");
                      }

                      // Create a blob and download it
                      const blob = await fileResponse.blob();
                      const downloadUrl = URL.createObjectURL(blob);
                      const a = document.createElement("a");
                      a.href = downloadUrl;
                      a.download = "attestation_letter.pdf"; // Change filename if necessary
                      document.body.appendChild(a);
                      a.click();
                      document.body.removeChild(a);
                      URL.revokeObjectURL(downloadUrl);
                    } catch (downloadError) {
                      console.error("Download Error:", downloadError);
                      Swal.fire(
                        "Error",
                        "Could not download the attestation letter",
                        "error"
                      );
                    }
                  });
                } else {
                  Swal.fire(
                    "Oops...",
                    response.message || "Something went wrong!",
                    "error"
                  );
                }
              } catch (error) {
                console.error("Submission Error:", error.message);
                Swal.fire(
                  "Oops...",
                  "An error occurred. Please try again!",
                  "error"
                );
              }
            });
          });
        </script>
      </div>
      <!--**********************************
            Content body end
        ***********************************-->

      <!--**********************************
            Footer start
        ***********************************-->
      <div class="footer">
        <div class="copyright">
          <p>Copyright Â©Powered By BDIC 2025</p>
        </div>
      </div>
      <!--**********************************
            Footer end
        ***********************************-->

      <!--**********************************
           Support ticket button start
        ***********************************-->

      <!--**********************************
           Support ticket button end
        ***********************************-->
    </div>
    <!--**********************************
        Main wrapper end
    ***********************************-->

    <script
      src="../../code.tidio.co_443/bpnp4xkz2axqrebqxcezgdca9yot1iyn.js"
      async
    ></script>
    <!--**********************************
        Scripts
    ***********************************-->
    <!-- Required vendors -->
    <script src="vendor/sweetalert2/dist/sweetalert2.min.js"></script>
    <script src="js/plugins-init/sweetalert.init.js"></script>
    <script src="vendor/global/global.min.js"></script>
    <script src="vendor/bootstrap-select/dist/js/bootstrap-select.min.js"></script>
    <script src="vendor/chart.js/Chart.bundle.min.js"></script>
    <script src="vendor/bootstrap-datetimepicker/js/moment.js"></script>
    <script src="vendor/bootstrap-datetimepicker/js/bootstrap-datetimepicker.min.js"></script>

    <script src="js/dashboard/dashboard-1.js"></script>

    <script src="js/custom.min.js"></script>
    <script src="js/deznav-init.js"></script>
    <script src="js/demo.js"></script>
    <script type="text/javascript" src="/js/index.js"></script>
  </body>
</html>
