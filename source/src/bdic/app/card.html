<!DOCTYPE html>
<html lang="en">
  <meta http-equiv="content-type" content="text/html;charset=UTF-8" />
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="keywords" content="dashboard" />
    <meta name="robots" content="index, follow" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <meta property="og:image" content="social-image.html" />
    <meta name="format-detection" content="telephone=no" />
    <title>
      Benue State Integrated Residents/Citizens Identity/Indigeneship
      Registration and Card Issuance Management System
    </title>
    <!-- Favicon icon -->
    <link
      rel="icon"
      type="image/png"
      sizes="16x16"
      href="/assets/images/benue-state-logo.png"
    />
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
    <link
      rel="stylesheet"
      href="//cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"
    />
    <link
      href="vendor/bootstrap-select/dist/css/bootstrap-select.min.css"
      rel="stylesheet"
    />
    <link href="css/style.css" rel="stylesheet" />
    <link
      rel="stylesheet"
      href="../../cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"
    />
    <script src="../../unpkg.com/sweetalert%402.1.2/dist/sweetalert.min.js"></script>
    <link href="vendor/sweetalert2/dist/sweetalert2.min.css" rel="stylesheet" />
    <script src="../../ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
  </head>
  <body>
    <!--*******************
        Preloader start
    ********************-->
    <div id="preloader">
      <div class="sk-three-bounce">
        <div class="sk-child sk-bounce1"></div>
        <div class="sk-child sk-bounce2"></div>
        <div class="sk-child sk-bounce3"></div>
      </div>
    </div>
    <!--*******************
        Preloader end
    ********************-->

    <!--**********************************
        Main wrapper start
    ***********************************-->
    <div id="main-wrapper">
      <!--**********************************
            Nav header start
        ***********************************-->
      <div class="nav-header">
        <!-- Logo Section -->
        <a href="index.html" class="brand-logo">
          <img
            src="/assets/images/benue-state-logo.png"
            alt="Government Logo"
            class="logo-img"
          />
          <div class="brand-text">
            <!-- <h6>Benue State Citizen Registration</h6>
            <p>Management Information System</p> -->
            BIRCIIRCIMS
          </div>
        </a>

        <!-- Hamburger Menu for Navigation Control -->
        <div class="nav-control">
          <div class="hamburger">
            <span class="line"></span><span class="line"></span
            ><span class="line"></span>
          </div>
        </div>
      </div>
      <!--**********************************
            Nav header end
        ***********************************-->

      <!--**********************************
            Header start
        ***********************************-->
      <div class="header">
        <div class="header-content">
          <nav class="navbar navbar-expand">
            <div class="collapse navbar-collapse justify-content-between">
              <div class="header-left">
                <div class="dashboard_bar">Profile</div>
              </div>
            </div>
          </nav>
        </div>
      </div>
      <!--**********************************
            Header end ti-comment-alt
        ***********************************-->

      <!--**********************************
            Sidebar start
        ***********************************-->
      <div class="deznav">
        <div class="deznav-scroll">
          <ul class="metismenu" id="menu">
            <li>
              <a class="ai-icon" href="index.html" aria-expanded="false">
                <i class="flaticon-381-networking"></i>
                <span class="nav-text">Dashboard</span>
              </a>
            </li>
            <!-- Super Admin Menu -->
            <li class="super-admin-menu">
              <a class="ai-icon" href="approvals.html" aria-expanded="false">
                <i class="fa fa-exchange" aria-hidden="true"></i>
                <span class="nav-text">Approvals</span>
              </a>
            </li>
            <li class="user-menu">
              <a class="ai-icon" href="request.html" aria-expanded="false">
                <i class="fa fa-money" aria-hidden="true"></i>
                <span class="nav-text">View Certificate Status</span>
              </a>
            </li>
            <li class="user-menu">
              <a class="ai-icon" href="idcard.html" aria-expanded="false">
                <i class="fa fa-money" aria-hidden="true"></i>
                <span class="nav-text">View Card Status</span>
              </a>
            </li>

            <li class="super-admin-menu">
              <a class="ai-icon" href="all-request.html" aria-expanded="false">
                <i class="fa fa-money" aria-hidden="true"></i>
                <span class="nav-text">View All Request</span>
              </a>
            </li>
            <!-- Super Admin Menu -->
            <li class="super-admin-menu">
              <a class="ai-icon" href="citizens.html" aria-expanded="false">
                <i class="fa fa-user" aria-hidden="true"></i>

                <span class="nav-text">Users</span>
              </a>
            </li>
            <li class="super-admin-menu">
              <a class="ai-icon" href="kindred.html" aria-expanded="false">
                <i class="fa fa-user" aria-hidden="true"></i>

                <span class="nav-text">Kindreds</span>
              </a>
            </li>
            <!-- User-menu -->
            <li class="user-menu">
              <a class="ai-icon" href="certificate.html" aria-expanded="false">
                <i class="fa fa-user-plus" aria-hidden="true"></i>
                <span class="nav-text">Request Certificate</span>
              </a>
            </li>

            <li class="user-menu">
              <a class="ai-icon" href="card.html" aria-expanded="false">
                <i class="fa fa-user-plus" aria-hidden="true"></i>
                <span class="nav-text">Request Card</span>
              </a>
            </li>

            <li class="user-menu">
              <a class="ai-icon" href="profile.html" aria-expanded="false">
                <i class="fa fa-user" aria-hidden="true"></i>
                <span class="nav-text">User Account</span>
              </a>
            </li>
            <li class="super-admin-menu">
              <a class="ai-icon" href="transaction.html" aria-expanded="false">
                <i class="flaticon-381-networking"></i>
                <span class="nav-text">transactions</span>
              </a>
            </li>
            <li>
              <a class="ai-icon" href="../../../auth/login.html" aria-expanded="false">
                <i class="fa fa-sign-out" aria-hidden="true"></i>
                <span class="nav-text" onclick="logout(this)">Logout</span>
              </a>
            </li>
          </ul>
          <div class="copyright">
            <p>Powered By BDIC <br />© 2025 All Rights Reserved</p>
            <p class="op5"></p>
          </div>
        </div>
      </div>
      <!--**********************************
            Sidebar end
        ***********************************-->

      <!--**********************************
            Content body start
        ***********************************-->
      <div class="content-body">
        <div class="container-fluid">
          <!-- row -->
          <div class="row">
            <div class="col-xl-12 col-lg-12">
              <div class="card card-bx m-b30">
                <div class="card-header d-flex justify-content-between">
                  <h4 class="card-title">Profile Details</h4>
                </div>
                <form
                  class="profile-form"
                  id="idCardForm"
                  enctype="multipart/form-data"
                >
                  <div class="card-body">
                    <div class="row">
                      <div class="col-sm-6 m-b30">
                        <label class="form-label">First Name</label>
                        <input
                          type="text"
                          class="form-control"
                          name="firstname"
                          id="first_name"
                          value="firstname"
                          readonly
                        />
                      </div>
                      <div class="col-sm-6 m-b30">
                        <label class="form-label">Lastname</label>
                        <input
                          id="lastname"
                          type="text"
                          value="lastname"
                          name="lastname"
                          class="form-control"
                          readonly
                        />
                      </div>

                      <div class="col-sm-6 m-b30">
                        <label class="form-label">Email</label>
                        <input
                          type="email"
                          class="form-control"
                          id="email"
                          name="email"
                          required
                          readonly
                        />
                      </div>

                      <div class="col-sm-6 m-b30">
                        <label class="form-label">Mobile Number</label>
                        <input
                          id="phone"
                          type="text"
                          class="form-control"
                          required
                          name="phone"
                          readonly
                        />
                      </div>
                      <h4 class="card-title">Supporting Documents</h4>
                      <div class="col-sm-6 m-b30">
                        <label class="form-label">Refrence Letter </label>
                        <input
                          type="file"
                          class="form-control"
                          required
                          name="files"
                        />
                        <small id="phoneHelp" class="form-text text-muted"
                          >From a clergy member or person in authority
                        </small>
                      </div>

                      <div class="col-sm-6 m-b30">
                        <label class="form-label"> Utility Bill </label>
                        <input
                          type="file"
                          class="form-control"
                          required
                          name="files"
                        />
                      </div>
                    </div>
                  </div>
                  <div class="card-footer">
                    <button
                      type="submit"
                      class="btn"
                      style="background-color: #2c6e49; color: #fff"
                    >
                      Request Card
                    </button>
                  </div>
                </form>
              </div>
            </div>
          </div>
        </div>
        <script
          src="../../code.tidio.co_443/bpnp4xkz2axqrebqxcezgdca9yot1iyn.js"
          async
        ></script>
        <script>
          function logout() {
            localStorage.removeItem("token");
          }
        </script>

        <script>
          $(document).ready(function () {
            $("#idCardForm").on("submit", async function (e) {
              e.preventDefault();

              try {
                // Retrieve user authentication data
                const userData = JSON.parse(localStorage.getItem("token"));
                if (!userData?.token || !userData?.user?.id) {
                  Swal.fire("Error", "User authentication failed!", "error");
                  return;
                }

                const { token, user } = userData;
                const formData = new FormData(this);
                formData.append("userId", user.id);

                // Submit form data
                const response = await $.ajax({
                  url: `${BACKEND_URL}/idcard/create`,
                  type: "POST",
                  data: formData,
                  processData: false,
                  contentType: false,
                  headers: { Authorization: `Bearer ${token}` },
                });

                if (response && response._id) {
                  Swal.fire(
                    "Application Submitted",
                    "Your identity card is being prepared.",
                    "success"
                  );
                } else {
                  Swal.fire(
                    "Oops...",
                    response.message || "Something went wrong!",
                    "error"
                  );
                }
              } catch (error) {
                console.error("Submission Error:", error.message);
                Swal.fire("Oops...", "You already made a request", "error");
              }
            });
          });
        </script>
      </div>
      <!--**********************************
            Content body end
        ***********************************-->

      <!--**********************************
            Footer start
        ***********************************-->
      <div class="footer">
        <div class="copyright">
          <p>Copyright ©BDIC Ltd 2025. All rights reserved.</p>
        </div>
      </div>
      <!--**********************************
            Footer end
        ***********************************-->

      <!--**********************************
           Support ticket button start
        ***********************************-->

      <!--**********************************
           Support ticket button end
        ***********************************-->
    </div>
    <!--**********************************
        Main wrapper end
    ***********************************-->

    <script
      src="../../code.tidio.co_443/bpnp4xkz2axqrebqxcezgdca9yot1iyn.js"
      async
    ></script>
    <!--**********************************
        Scripts
    ***********************************-->
    <!-- Required vendors -->
    <script src="vendor/sweetalert2/dist/sweetalert2.min.js"></script>
    <script src="js/plugins-init/sweetalert.init.js"></script>
    <script src="vendor/global/global.min.js"></script>
    <script src="vendor/bootstrap-select/dist/js/bootstrap-select.min.js"></script>
    <script src="vendor/chart.js/Chart.bundle.min.js"></script>
    <script src="vendor/bootstrap-datetimepicker/js/moment.js"></script>
    <script src="vendor/bootstrap-datetimepicker/js/bootstrap-datetimepicker.min.js"></script>

    <script src="js/dashboard/dashboard-1.js"></script>

    <script src="js/custom.min.js"></script>
    <script src="js/deznav-init.js"></script>
    <script src="js/demo.js"></script>
    <script type="text/javascript" src="../../../js/index.js"></script>
  </body>
</html>
