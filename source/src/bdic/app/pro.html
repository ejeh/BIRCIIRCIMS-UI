<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Registration Form</title>
    <!-- Bootstrap CSS -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <!-- Bootstrap Icons -->
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css"
    />
    <!-- jQuery -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <style>
      .step-btn.active {
        background-color: #0d6efd;
        color: white;
      }
      .step-btn.completed {
        background-color: #198754;
        color: white;
      }
      .step-btn.disabled {
        background-color: #e9ecef;
        color: #6c757d;
        cursor: not-allowed;
      }
      .progress {
        height: 8px;
      }
      .form-step {
        display: none;
      }
      .form-step.active {
        display: block;
      }
      .neighbor-card,
      .family-card,
      .employment-card {
        margin-bottom: 1rem;
        padding: 1rem;
        border: 1px solid #dee2e6;
        border-radius: 0.375rem;
      }
      .passport-upload {
        border: 2px dashed #dee2e6;
        border-radius: 0.375rem;
        padding: 1.5rem;
        text-align: center;
      }
    </style>
  </head>

  <body class="bg-light">
    <div class="container py-4">
      <div class="row justify-content-center">
        <div class="col-lg-10">
          <!-- Header -->
          <div class="mb-5 text-center">
            <h1 class="display-5 fw-bold mb-2">Registration Form</h1>
            <p class="text-muted">
              Complete all steps to finish your registration
            </p>
          </div>

          <!-- Progress Bar -->
          <div class="mb-5">
            <div class="d-flex justify-content-between mb-2">
              <span class="text-sm fw-medium" id="step-counter"
                >Step 1 of 8</span
              >
              <span class="text-sm text-muted" id="progress-percent"
                >12% Complete</span
              >
            </div>
            <div class="progress">
              <div
                class="progress-bar"
                id="progress-bar"
                role="progressbar"
                style="width: 12%"
              ></div>
            </div>
          </div>

          <!-- Step Navigation -->
          <div class="mb-5">
            <div class="d-flex flex-wrap gap-2" id="step-buttons">
              <button class="btn btn-sm step-btn active" data-step="0">
                <span>1</span>
                <span class="d-none d-sm-inline">Profile Details</span>
              </button>
              <button class="btn btn-sm step-btn" data-step="1">
                <span>2</span>
                <span class="d-none d-sm-inline">Residential Address</span>
              </button>
              <button class="btn btn-sm step-btn" data-step="2">
                <span>3</span>
                <span class="d-none d-sm-inline">Identification</span>
              </button>
              <button class="btn btn-sm step-btn" data-step="3">
                <span>4</span>
                <span class="d-none d-sm-inline">Next of Kin</span>
              </button>
              <button class="btn btn-sm step-btn" data-step="4">
                <span>5</span>
                <span class="d-none d-sm-inline">Neighbor Contacts</span>
              </button>
              <button class="btn btn-sm step-btn" data-step="5">
                <span>6</span>
                <span class="d-none d-sm-inline">Family Contacts</span>
              </button>
              <button class="btn btn-sm step-btn" data-step="6">
                <span>7</span>
                <span class="d-none d-sm-inline">Business Details</span>
              </button>
              <button class="btn btn-sm step-btn" data-step="7">
                <span>8</span>
                <span class="d-none d-sm-inline">Employment History</span>
              </button>
            </div>
          </div>

          <!-- Form Content -->
          <div class="card mb-4">
            <div class="card-body">
              <!-- Step 1: Profile Details -->
              <div class="form-step active" id="step-0">
                <div class="mb-4">
                  <h2 class="h4 fw-semibold mb-2">Profile Details</h2>
                  <hr />
                </div>
                <div class="row g-3">
                  <div class="col-md-6">
                    <label for="firstname" class="form-label">First Name</label>
                    <input
                      type="text"
                      class="form-control"
                      id="firstname"
                      name="firstname"
                      readonly
                    />
                  </div>
                  <div class="col-md-6">
                    <label for="lastname" class="form-label">Last Name</label>
                    <input
                      type="text"
                      class="form-control"
                      id="lastname"
                      name="lastname"
                      readonly
                    />
                  </div>
                  <div class="col-md-6">
                    <label for="middlename" class="form-label"
                      >Middle Name</label
                    >
                    <input
                      type="text"
                      class="form-control"
                      id="middlename"
                      name="middlename"
                    />
                  </div>
                  <div class="col-md-6">
                    <label for="gender" class="form-label">Gender</label>
                    <select class="form-select" id="gender" name="gender">
                      <option value="" selected disabled>Select gender</option>
                      <option value="Male">Male</option>
                      <option value="Female">Female</option>
                    </select>
                  </div>
                  <div class="col-md-6">
                    <label for="maritalStatus" class="form-label"
                      >Marital Status</label
                    >
                    <select
                      class="form-select"
                      id="maritalStatus"
                      name="maritalStatus"
                    >
                      <option value="" selected disabled>
                        Select marital status
                      </option>
                      <option value="single">Single</option>
                      <option value="married">Married</option>
                      <option value="divorced">Divorced</option>
                      <option value="widowed">Widowed</option>
                    </select>
                  </div>
                  <div class="col-md-6">
                    <label for="DOB" class="form-label">Date of Birth</label>
                    <input
                      type="date"
                      class="form-control"
                      id="DOB"
                      name="DOB"
                      min="1900-01-01"
                    />
                  </div>
                  <div class="col-md-6">
                    <label for="stateOfOrigin" class="form-label"
                      >State of Origin</label
                    >
                    <input
                      type="text"
                      class="form-control"
                      id="stateOfOrigin"
                      name="stateOfOrigin"
                      readonly
                    />
                  </div>
                  <div class="col-md-6">
                    <label for="nationality" class="form-label"
                      >Nationality</label
                    >
                    <input
                      type="text"
                      class="form-control"
                      id="nationality"
                      name="nationality"
                    />
                  </div>
                  <div class="col-md-6">
                    <label for="community" class="form-label">Community</label>
                    <input
                      type="text"
                      class="form-control"
                      id="community"
                      name="community"
                    />
                  </div>
                  <div class="col-md-6">
                    <label for="religion" class="form-label">Religion</label>
                    <select class="form-select" id="religion" name="religion">
                      <option value="" selected disabled>
                        Select religion
                      </option>
                      <option value="christian">Christian</option>
                      <option value="muslim">Muslim</option>
                      <option value="others">Others</option>
                    </select>
                  </div>
                </div>

                <!-- Passport Photo Section -->
                <div class="mt-4">
                  <label class="form-label">Recent Passport Photograph</label>
                  <div class="passport-upload">
                    <div class="d-flex flex-column align-items-center gap-3">
                      <div
                        class="bg-light rounded-circle d-flex align-items-center justify-content-center"
                        style="width: 96px; height: 96px"
                      >
                        <i class="bi bi-camera fs-3 text-muted"></i>
                      </div>
                      <div class="text-center">
                        <p class="text-muted small">
                          Upload your passport photograph
                        </p>
                        <div class="d-flex gap-2 justify-content-center">
                          <button
                            type="button"
                            class="btn btn-outline-secondary btn-sm"
                          >
                            <i class="bi bi-camera me-2"></i>Take Photo
                          </button>
                          <button
                            type="button"
                            class="btn btn-outline-secondary btn-sm"
                          >
                            <i class="bi bi-upload me-2"></i>Upload File
                          </button>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>

              <!-- Step 2: Residential Address -->
              <div class="form-step" id="step-1">
                <div class="mb-4">
                  <h2 class="h4 fw-semibold mb-2">Residential Address</h2>
                  <hr />
                </div>
                <div class="row g-3">
                  <div class="col-md-6">
                    <label for="house_number" class="form-label"
                      >House Number</label
                    >
                    <input
                      type="text"
                      class="form-control"
                      id="house_number"
                      name="house_number"
                    />
                  </div>
                  <div class="col-md-6">
                    <label for="street_name" class="form-label"
                      >Street Name</label
                    >
                    <input
                      type="text"
                      class="form-control"
                      id="street_name"
                      name="street_name"
                    />
                  </div>
                  <div class="col-md-6">
                    <label for="nearest_bus_stop_landmark" class="form-label"
                      >Nearest Bus-Stop/Landmark</label
                    >
                    <input
                      type="text"
                      class="form-control"
                      id="nearest_bus_stop_landmark"
                      name="nearest_bus_stop_landmark"
                    />
                  </div>
                  <div class="col-md-6">
                    <label for="stateOfResidence" class="form-label"
                      >State of Residence</label
                    >
                    <select
                      class="form-select"
                      id="stateOfResidence"
                      name="stateOfResidence"
                    >
                      <option value="" selected disabled>Select state</option>
                      <option value="abia">Abia</option>
                      <option value="adamawa">Adamawa</option>
                      <option value="akwa-ibom">Akwa Ibom</option>
                      <option value="anambra">Anambra</option>
                      <option value="bauchi">Bauchi</option>
                      <option value="bayelsa">Bayelsa</option>
                      <option value="benue">Benue</option>
                      <option value="borno">Borno</option>
                      <option value="cross-river">Cross River</option>
                      <option value="delta">Delta</option>
                      <option value="ebonyi">Ebonyi</option>
                      <option value="edo">Edo</option>
                      <option value="ekiti">Ekiti</option>
                      <option value="enugu">Enugu</option>
                      <option value="fct">FCT</option>
                      <option value="gombe">Gombe</option>
                      <option value="imo">Imo</option>
                      <option value="jigawa">Jigawa</option>
                      <option value="kaduna">Kaduna</option>
                      <option value="kano">Kano</option>
                      <option value="katsina">Katsina</option>
                      <option value="kebbi">Kebbi</option>
                      <option value="kogi">Kogi</option>
                      <option value="kwara">Kwara</option>
                      <option value="lagos">Lagos</option>
                      <option value="nasarawa">Nasarawa</option>
                      <option value="niger">Niger</option>
                      <option value="ogun">Ogun</option>
                      <option value="ondo">Ondo</option>
                      <option value="osun">Osun</option>
                      <option value="oyo">Oyo</option>
                      <option value="plateau">Plateau</option>
                      <option value="rivers">Rivers</option>
                      <option value="sokoto">Sokoto</option>
                      <option value="taraba">Taraba</option>
                      <option value="yobe">Yobe</option>
                      <option value="zamfara">Zamfara</option>
                    </select>
                  </div>
                  <div class="col-md-6">
                    <label for="lgaOfResidence" class="form-label"
                      >Local Government Area</label
                    >
                    <select
                      class="form-select"
                      id="lgaOfResidence"
                      name="lgaOfResidence"
                    >
                      <option value="" selected disabled>Select LGA</option>
                      <option value="lga1">LGA 1</option>
                      <option value="lga2">LGA 2</option>
                      <option value="lga3">LGA 3</option>
                    </select>
                  </div>
                  <div class="col-md-6">
                    <label for="countryOfResidence" class="form-label"
                      >Country of Residence</label
                    >
                    <select
                      class="form-select"
                      id="countryOfResidence"
                      name="countryOfResidence"
                    >
                      <option value="" selected disabled>Select country</option>
                      <option value="nigeria">Nigeria</option>
                      <option value="ghana">Ghana</option>
                      <option value="kenya">Kenya</option>
                      <option value="south-africa">South Africa</option>
                    </select>
                  </div>
                </div>
              </div>

              <!-- Step 3: Identification -->
              <div class="form-step" id="step-2">
                <div class="mb-4">
                  <h2 class="h4 fw-semibold mb-2">Identification</h2>
                  <hr />
                </div>
                <div class="row g-3">
                  <div class="col-md-6">
                    <label for="identification" class="form-label"
                      >Identification Type</label
                    >
                    <select
                      class="form-select"
                      id="identification"
                      name="identification"
                    >
                      <option value="" selected disabled>
                        Select identification type
                      </option>
                      <option value="national_id">National ID</option>
                      <option value="driver_licence">Driver Licence</option>
                      <option value="international_passport">
                        International Passport
                      </option>
                      <option value="voters_card">Voter's Card</option>
                      <option value="others">Others</option>
                    </select>
                  </div>
                  <div
                    class="col-md-6"
                    id="other-identification-container"
                    style="display: none"
                  >
                    <label for="other_identification" class="form-label"
                      >Specify Other Identification</label
                    >
                    <input
                      type="text"
                      class="form-control"
                      id="other_identification"
                      name="other_identification"
                      placeholder="Please specify"
                    />
                  </div>
                  <div class="col-md-6">
                    <label for="id_number" class="form-label">ID Number</label>
                    <input
                      type="text"
                      class="form-control"
                      id="id_number"
                      name="id_number"
                    />
                  </div>
                  <div class="col-md-6">
                    <label for="issue_date" class="form-label"
                      >Issue Date</label
                    >
                    <input
                      type="date"
                      class="form-control"
                      id="issue_date"
                      name="issue_date"
                    />
                  </div>
                  <div class="col-md-6">
                    <label for="expiry_date" class="form-label"
                      >Expiry Date</label
                    >
                    <input
                      type="date"
                      class="form-control"
                      id="expiry_date"
                      name="expiry_date"
                    />
                  </div>
                </div>
              </div>

              <!-- Step 4: Next of Kin -->
              <div class="form-step" id="step-3">
                <div class="mb-4">
                  <h2 class="h4 fw-semibold mb-2">Next of Kin</h2>
                  <hr />
                </div>
                <div class="row g-3">
                  <div class="col-md-6">
                    <label for="nok_surname" class="form-label">Surname</label>
                    <input
                      type="text"
                      class="form-control"
                      id="nok_surname"
                      name="nok_surname"
                    />
                  </div>
                  <div class="col-md-6">
                    <label for="nok_firstname" class="form-label"
                      >First Name</label
                    >
                    <input
                      type="text"
                      class="form-control"
                      id="nok_firstname"
                      name="nok_firstname"
                    />
                  </div>
                  <div class="col-md-6">
                    <label for="nok_middlename" class="form-label"
                      >Middle Name</label
                    >
                    <input
                      type="text"
                      class="form-control"
                      id="nok_middlename"
                      name="nok_middlename"
                    />
                  </div>
                  <div class="col-md-6">
                    <label for="nok_relationship" class="form-label"
                      >Relationship</label
                    >
                    <input
                      type="text"
                      class="form-control"
                      id="nok_relationship"
                      name="nok_relationship"
                    />
                  </div>
                  <div class="col-md-6">
                    <label for="nok_countryOfResidence" class="form-label"
                      >Country of Residence</label
                    >
                    <input
                      type="text"
                      class="form-control"
                      id="nok_countryOfResidence"
                      name="nok_countryOfResidence"
                    />
                  </div>
                  <div class="col-md-6">
                    <label for="nok_stateOfResidence" class="form-label"
                      >State of Residence</label
                    >
                    <input
                      type="text"
                      class="form-control"
                      id="nok_stateOfResidence"
                      name="nok_stateOfResidence"
                    />
                  </div>
                  <div class="col-md-6">
                    <label for="nok_lgaOfResidence" class="form-label"
                      >LGA of Residence</label
                    >
                    <input
                      type="text"
                      class="form-control"
                      id="nok_lgaOfResidence"
                      name="nok_lgaOfResidence"
                    />
                  </div>
                  <div class="col-md-6">
                    <label for="nok_cityOfResidence" class="form-label"
                      >City/Town of Residence</label
                    >
                    <input
                      type="text"
                      class="form-control"
                      id="nok_cityOfResidence"
                      name="nok_cityOfResidence"
                    />
                  </div>
                  <div class="col-12">
                    <label for="nok_address" class="form-label">Address</label>
                    <input
                      type="text"
                      class="form-control"
                      id="nok_address"
                      name="nok_address"
                    />
                  </div>
                </div>
              </div>

              <!-- Step 5: Neighbor Contacts -->
              <div class="form-step" id="step-4">
                <div class="mb-4">
                  <h2 class="h4 fw-semibold mb-2">
                    Neighbors' Contact Details
                  </h2>
                  <hr />
                </div>
                <div id="neighbors-container">
                  <!-- Neighbor cards will be added here -->
                  <div class="neighbor-card">
                    <div
                      class="d-flex justify-content-between align-items-center mb-3"
                    >
                      <h4 class="h5 mb-0">Neighbor 1</h4>
                    </div>
                    <div class="row g-3">
                      <div class="col-md-4">
                        <label class="form-label">Full Name</label>
                        <input
                          type="text"
                          class="form-control neighbor-name"
                          name="neighbors[0][name]"
                        />
                      </div>
                      <div class="col-md-4">
                        <label class="form-label">Residential Address</label>
                        <input
                          type="text"
                          class="form-control neighbor-address"
                          name="neighbors[0][address]"
                        />
                      </div>
                      <div class="col-md-4">
                        <label class="form-label">Phone Number</label>
                        <input
                          type="tel"
                          class="form-control neighbor-phone"
                          name="neighbors[0][phone]"
                        />
                      </div>
                    </div>
                  </div>
                </div>
                <button
                  type="button"
                  class="btn btn-outline-primary mt-3"
                  id="add-neighbor"
                >
                  <i class="bi bi-plus me-2"></i>Add Another Neighbor
                </button>
                <p
                  class="text-danger small mt-2 d-none"
                  id="max-neighbors-message"
                >
                  Maximum of 5 neighbors reached.
                </p>
              </div>

              <!-- Step 6: Family Contacts -->
              <div class="form-step" id="step-5">
                <div class="mb-4">
                  <h2 class="h4 fw-semibold mb-2">Family Contact Details</h2>
                  <hr />
                </div>
                <div id="family-container">
                  <!-- Family member cards will be added here -->
                  <div class="family-card">
                    <div
                      class="d-flex justify-content-between align-items-center mb-3"
                    >
                      <h4 class="h5 mb-0">Family Member 1</h4>
                    </div>
                    <div class="row g-3">
                      <div class="col-md-3">
                        <label class="form-label">Full Name</label>
                        <input
                          type="text"
                          class="form-control family-name"
                          name="family[0][name]"
                        />
                      </div>
                      <div class="col-md-3">
                        <label class="form-label">Relationship</label>
                        <input
                          type="text"
                          class="form-control family-relationship"
                          name="family[0][relationship]"
                        />
                      </div>
                      <div class="col-md-3">
                        <label class="form-label">Residential Address</label>
                        <input
                          type="text"
                          class="form-control family-address"
                          name="family[0][address]"
                        />
                      </div>
                      <div class="col-md-3">
                        <label class="form-label">Phone Number</label>
                        <input
                          type="tel"
                          class="form-control family-phone"
                          name="family[0][phone]"
                        />
                      </div>
                    </div>
                  </div>
                </div>
                <button
                  type="button"
                  class="btn btn-outline-primary mt-3"
                  id="add-family"
                >
                  <i class="bi bi-plus me-2"></i>Add Another Family Member
                </button>
                <p
                  class="text-danger small mt-2 d-none"
                  id="max-family-message"
                >
                  Maximum of 5 family members reached.
                </p>
              </div>

              <!-- Step 7: Business Details -->
              <div class="form-step" id="step-6">
                <div class="mb-4">
                  <h2 class="h4 fw-semibold mb-2">Business Details</h2>
                  <hr />
                </div>
                <div class="row g-3">
                  <div class="col-md-6">
                    <label for="biz_name" class="form-label"
                      >Business Name</label
                    >
                    <input
                      type="text"
                      class="form-control"
                      id="biz_name"
                      name="biz_name"
                    />
                  </div>
                  <div class="col-md-6">
                    <label for="biz_type" class="form-label"
                      >Business Type</label
                    >
                    <select class="form-select" id="biz_type" name="biz_type">
                      <option value="" selected disabled>
                        Select business type
                      </option>
                      <option value="sole_proprietorship">
                        Sole Proprietorship
                      </option>
                      <option value="partnership">Partnership</option>
                      <option value="limited_liability_company">
                        Limited Liability Company
                      </option>
                      <option value="corporation">Corporation</option>
                      <option value="cooperative">Cooperative</option>
                      <option value="others">Others</option>
                    </select>
                  </div>
                  <div class="col-md-6">
                    <label for="registration_number" class="form-label"
                      >Business Registration Number</label
                    >
                    <input
                      type="text"
                      class="form-control"
                      id="registration_number"
                      name="registration_number"
                    />
                  </div>
                  <div class="col-md-6">
                    <label for="biz_address" class="form-label"
                      >Business Address</label
                    >
                    <input
                      type="text"
                      class="form-control"
                      id="biz_address"
                      name="biz_address"
                    />
                  </div>
                  <div class="col-md-6">
                    <label for="nature_of_business" class="form-label"
                      >Nature of Business</label
                    >
                    <select
                      class="form-select"
                      id="nature_of_business"
                      name="nature_of_business"
                    >
                      <option value="" selected disabled>
                        Select nature of business
                      </option>
                      <option value="retail">Retail</option>
                      <option value="manufacturing">Manufacturing</option>
                      <option value="ICT">ICT</option>
                      <option value="agriculture">Agriculture</option>
                      <option value="others">Others</option>
                    </select>
                  </div>
                  <div class="col-md-6">
                    <label for="numberOfYears" class="form-label"
                      >Years in Operation</label
                    >
                    <input
                      type="text"
                      class="form-control"
                      id="numberOfYears"
                      name="numberOfYears"
                    />
                  </div>
                  <div class="col-md-6">
                    <label for="numberOfEmployees" class="form-label"
                      >Number of Employees</label
                    >
                    <input
                      type="number"
                      class="form-control"
                      id="numberOfEmployees"
                      name="numberOfEmployees"
                    />
                  </div>
                  <div class="col-md-6">
                    <label for="annualRevenue" class="form-label"
                      >Annual Revenue (Optional)</label
                    >
                    <input
                      type="text"
                      class="form-control"
                      id="annualRevenue"
                      name="annualRevenue"
                    />
                  </div>
                  <div class="col-md-6">
                    <label for="TIN" class="form-label"
                      >Tax Identification Number (TIN)</label
                    >
                    <input
                      type="text"
                      class="form-control"
                      id="TIN"
                      name="TIN"
                      maxlength="11"
                    />
                  </div>
                  <div class="col-md-6">
                    <label for="biz_phone" class="form-label"
                      >Mobile Number</label
                    >
                    <input
                      type="tel"
                      class="form-control"
                      id="biz_phone"
                      name="biz_phone"
                      maxlength="11"
                    />
                  </div>
                  <div class="col-md-6">
                    <label for="biz_email" class="form-label">Email</label>
                    <input
                      type="email"
                      class="form-control"
                      id="biz_email"
                      name="biz_email"
                    />
                  </div>
                </div>
              </div>

              <!-- Step 8: Employment History -->
              <div class="form-step" id="step-7">
                <div class="mb-4">
                  <h2 class="h4 fw-semibold mb-2">Employment History</h2>
                  <hr />
                </div>
                <div id="employment-container">
                  <!-- Employment cards will be added here -->
                  <div class="employment-card">
                    <div
                      class="d-flex justify-content-between align-items-center mb-3"
                    >
                      <h4 class="h5 mb-0">Employment 1</h4>
                    </div>
                    <div class="row g-3">
                      <div class="col-md-6">
                        <label class="form-label">Company Name</label>
                        <input
                          type="text"
                          class="form-control employment-company"
                          name="employment[0][companyName]"
                        />
                      </div>
                      <div class="col-md-6">
                        <label class="form-label">Company Address</label>
                        <input
                          type="text"
                          class="form-control employment-address"
                          name="employment[0][address]"
                        />
                      </div>
                      <div class="col-md-6">
                        <label class="form-label">Designation</label>
                        <input
                          type="text"
                          class="form-control employment-designation"
                          name="employment[0][designation]"
                        />
                      </div>
                      <div class="col-md-6">
                        <label class="form-label">Start Year</label>
                        <input
                          type="number"
                          class="form-control employment-start"
                          name="employment[0][startYear]"
                        />
                      </div>
                      <div class="col-md-6">
                        <label class="form-label">End Year</label>
                        <input
                          type="number"
                          class="form-control employment-end"
                          name="employment[0][endYear]"
                        />
                      </div>
                      <div class="col-md-6">
                        <div class="form-check mt-4">
                          <input
                            class="form-check-input employment-current"
                            type="checkbox"
                            id="current-0"
                            name="employment[0][isCurrentEmployment]"
                          />
                          <label class="form-check-label" for="current-0">
                            This is my current employment
                          </label>
                        </div>
                      </div>
                      <div class="col-12">
                        <label class="form-label">Description of Company</label>
                        <textarea
                          class="form-control employment-description"
                          name="employment[0][description]"
                          rows="3"
                        ></textarea>
                      </div>
                    </div>
                  </div>
                </div>
                <button
                  type="button"
                  class="btn btn-outline-primary mt-3"
                  id="add-employment"
                >
                  <i class="bi bi-plus me-2"></i>Add Another Employment
                </button>
              </div>
            </div>
          </div>

          <!-- Navigation Buttons -->
          <div class="d-flex justify-content-between">
            <button
              type="button"
              class="btn btn-outline-secondary"
              id="prev-btn"
              disabled
            >
              <i class="bi bi-chevron-left me-2"></i>Previous
            </button>
            <div class="d-flex gap-3">
              <button
                type="button"
                class="btn btn-success d-none"
                id="submit-btn"
              >
                Submit Form <i class="bi bi-check ms-2"></i>
              </button>
              <button type="button" class="btn btn-primary" id="next-btn">
                Next <i class="bi bi-chevron-right ms-2"></i>
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Bootstrap JS Bundle with Popper -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

    <script>
      $(document).ready(function () {
        // Form data object
        let formData = {};
        let completedSteps = [];
        let currentStep = 0;
        const totalSteps = 8;

        // Initialize the form
        updateProgress();
        updateStepButtons();

        // Step navigation buttons
        $("#step-buttons button").click(function () {
          const stepIndex = parseInt($(this).data("step"));
          if (stepIndex <= Math.max(...completedSteps, currentStep)) {
            goToStep(stepIndex);
          }
        });

        // Previous button
        $("#prev-btn").click(function () {
          prevStep();
        });

        // Next button
        $("#next-btn").click(function () {
          nextStep();
        });

        // Submit button
        $("#submit-btn").click(function () {
          handleSubmit();
        });

        // Identification type change
        $("#identification").change(function () {
          if ($(this).val() === "others") {
            $("#other-identification-container").show();
          } else {
            $("#other-identification-container").hide();
            $("#other_identification").val("");
          }
        });

        // Current employment checkbox
        $(document).on("change", ".employment-current", function () {
          const card = $(this).closest(".employment-card");
          const endYearInput = card.find(".employment-end");
          if ($(this).is(":checked")) {
            endYearInput.val("").prop("disabled", true);
          } else {
            endYearInput.prop("disabled", false);
          }
        });

        // Add neighbor
        let neighborCount = 1;
        $("#add-neighbor").click(function () {
          if (neighborCount < 5) {
            neighborCount++;
            const newNeighbor = `
                        <div class="neighbor-card">
                            <div class="d-flex justify-content-between align-items-center mb-3">
                                <h4 class="h5 mb-0">Neighbor ${neighborCount}</h4>
                                <button type="button" class="btn btn-sm btn-outline-danger remove-neighbor">
                                    <i class="bi bi-trash"></i>
                                </button>
                            </div>
                            <div class="row g-3">
                                <div class="col-md-4">
                                    <label class="form-label">Full Name</label>
                                    <input type="text" class="form-control neighbor-name" name="neighbors[${
                                      neighborCount - 1
                                    }][name]">
                                </div>
                                <div class="col-md-4">
                                    <label class="form-label">Residential Address</label>
                                    <input type="text" class="form-control neighbor-address" name="neighbors[${
                                      neighborCount - 1
                                    }][address]">
                                </div>
                                <div class="col-md-4">
                                    <label class="form-label">Phone Number</label>
                                    <input type="tel" class="form-control neighbor-phone" name="neighbors[${
                                      neighborCount - 1
                                    }][phone]">
                                </div>
                            </div>
                        </div>
                    `;
            $("#neighbors-container").append(newNeighbor);

            if (neighborCount >= 5) {
              $("#add-neighbor").prop("disabled", true);
              $("#max-neighbors-message").removeClass("d-none");
            }
          }
        });

        // Remove neighbor
        $(document).on("click", ".remove-neighbor", function () {
          $(this).closest(".neighbor-card").remove();
          neighborCount--;
          $("#add-neighbor").prop("disabled", false);
          $("#max-neighbors-message").addClass("d-none");
          // Renumber remaining neighbors
          $(".neighbor-card").each(function (index) {
            $(this)
              .find("h4")
              .text(`Neighbor ${index + 1}`);
          });
        });

        // Add family member
        let familyCount = 1;
        $("#add-family").click(function () {
          if (familyCount < 5) {
            familyCount++;
            const newFamily = `
                        <div class="family-card">
                            <div class="d-flex justify-content-between align-items-center mb-3">
                                <h4 class="h5 mb-0">Family Member ${familyCount}</h4>
                                <button type="button" class="btn btn-sm btn-outline-danger remove-family">
                                    <i class="bi bi-trash"></i>
                                </button>
                            </div>
                            <div class="row g-3">
                                <div class="col-md-3">
                                    <label class="form-label">Full Name</label>
                                    <input type="text" class="form-control family-name" name="family[${
                                      familyCount - 1
                                    }][name]">
                                </div>
                                <div class="col-md-3">
                                    <label class="form-label">Relationship</label>
                                    <input type="text" class="form-control family-relationship" name="family[${
                                      familyCount - 1
                                    }][relationship]">
                                </div>
                                <div class="col-md-3">
                                    <label class="form-label">Residential Address</label>
                                    <input type="text" class="form-control family-address" name="family[${
                                      familyCount - 1
                                    }][address]">
                                </div>
                                <div class="col-md-3">
                                    <label class="form-label">Phone Number</label>
                                    <input type="tel" class="form-control family-phone" name="family[${
                                      familyCount - 1
                                    }][phone]">
                                </div>
                            </div>
                        </div>
                    `;
            $("#family-container").append(newFamily);

            if (familyCount >= 5) {
              $("#add-family").prop("disabled", true);
              $("#max-family-message").removeClass("d-none");
            }
          }
        });

        // Remove family member
        $(document).on("click", ".remove-family", function () {
          $(this).closest(".family-card").remove();
          familyCount--;
          $("#add-family").prop("disabled", false);
          $("#max-family-message").addClass("d-none");
          // Renumber remaining family members
          $(".family-card").each(function (index) {
            $(this)
              .find("h4")
              .text(`Family Member ${index + 1}`);
          });
        });

        // Add employment
        let employmentCount = 1;
        $("#add-employment").click(function () {
          employmentCount++;
          const newEmployment = `
                    <div class="employment-card">
                        <div class="d-flex justify-content-between align-items-center mb-3">
                            <h4 class="h5 mb-0">Employment ${employmentCount}</h4>
                            <button type="button" class="btn btn-sm btn-outline-danger remove-employment">
                                <i class="bi bi-trash"></i>
                            </button>
                        </div>
                        <div class="row g-3">
                            <div class="col-md-6">
                                <label class="form-label">Company Name</label>
                                <input type="text" class="form-control employment-company" name="employment[${
                                  employmentCount - 1
                                }][companyName]">
                            </div>
                            <div class="col-md-6">
                                <label class="form-label">Company Address</label>
                                <input type="text" class="form-control employment-address" name="employment[${
                                  employmentCount - 1
                                }][address]">
                            </div>
                            <div class="col-md-6">
                                <label class="form-label">Designation</label>
                                <input type="text" class="form-control employment-designation" name="employment[${
                                  employmentCount - 1
                                }][designation]">
                            </div>
                            <div class="col-md-6">
                                <label class="form-label">Start Year</label>
                                <input type="number" class="form-control employment-start" name="employment[${
                                  employmentCount - 1
                                }][startYear]">
                            </div>
                            <div class="col-md-6">
                                <label class="form-label">End Year</label>
                                <input type="number" class="form-control employment-end" name="employment[${
                                  employmentCount - 1
                                }][endYear]">
                            </div>
                            <div class="col-md-6">
                                <div class="form-check mt-4">
                                    <input class="form-check-input employment-current" type="checkbox" id="current-${
                                      employmentCount - 1
                                    }" name="employment[${
            employmentCount - 1
          }][isCurrentEmployment]">
                                    <label class="form-check-label" for="current-${
                                      employmentCount - 1
                                    }">
                                        This is my current employment
                                    </label>
                                </div>
                            </div>
                            <div class="col-12">
                                <label class="form-label">Description of Company</label>
                                <textarea class="form-control employment-description" name="employment[${
                                  employmentCount - 1
                                }][description]" rows="3"></textarea>
                            </div>
                        </div>
                    </div>
                `;
          $("#employment-container").append(newEmployment);
        });

        // Remove employment
        $(document).on("click", ".remove-employment", function () {
          $(this).closest(".employment-card").remove();
          employmentCount--;
          // Renumber remaining employments
          $(".employment-card").each(function (index) {
            $(this)
              .find("h4")
              .text(`Employment ${index + 1}`);
          });
        });

        // Form functions
        function updateFormData() {
          // Update formData with all form values
          $("input, select, textarea").each(function () {
            const name = $(this).attr("name");
            if (name) {
              if ($(this).attr("type") === "checkbox") {
                formData[name] = $(this).is(":checked");
              } else {
                formData[name] = $(this).val();
              }
            }
          });

          // Handle arrays (neighbors, family, employment)
          const neighbors = [];
          $(".neighbor-card").each(function (index) {
            neighbors.push({
              name: $(this).find(".neighbor-name").val(),
              address: $(this).find(".neighbor-address").val(),
              phone: $(this).find(".neighbor-phone").val(),
            });
          });
          formData.neighbors = neighbors;

          const family = [];
          $(".family-card").each(function (index) {
            family.push({
              name: $(this).find(".family-name").val(),
              relationship: $(this).find(".family-relationship").val(),
              address: $(this).find(".family-address").val(),
              phone: $(this).find(".family-phone").val(),
            });
          });
          formData.family = family;

          const employment = [];
          $(".employment-card").each(function (index) {
            employment.push({
              companyName: $(this).find(".employment-company").val(),
              address: $(this).find(".employment-address").val(),
              designation: $(this).find(".employment-designation").val(),
              startYear: $(this).find(".employment-start").val(),
              endYear: $(this).find(".employment-end").val(),
              isCurrentEmployment: $(this)
                .find(".employment-current")
                .is(":checked"),
              description: $(this).find(".employment-description").val(),
            });
          });
          formData.employment = employment;
        }

        function nextStep() {
          if (currentStep < totalSteps - 1) {
            updateFormData();
            if (!completedSteps.includes(currentStep)) {
              completedSteps.push(currentStep);
            }
            currentStep++;
            updateProgress();
            updateStepButtons();
            showCurrentStep();
          }
        }

        function prevStep() {
          if (currentStep > 0) {
            currentStep--;
            updateProgress();
            updateStepButtons();
            showCurrentStep();
          }
        }

        function goToStep(stepIndex) {
          if (stepIndex <= Math.max(...completedSteps, currentStep)) {
            currentStep = stepIndex;
            updateProgress();
            updateStepButtons();
            showCurrentStep();
          }
        }

        function showCurrentStep() {
          $(".form-step").removeClass("active");
          $(`#step-${currentStep}`).addClass("active");

          // Show/hide navigation buttons
          if (currentStep === totalSteps - 1) {
            $("#next-btn").addClass("d-none");
            $("#submit-btn").removeClass("d-none");
          } else {
            $("#next-btn").removeClass("d-none");
            $("#submit-btn").addClass("d-none");
          }

          $("#prev-btn").prop("disabled", currentStep === 0);
        }

        function updateProgress() {
          const progress = ((currentStep + 1) / totalSteps) * 100;
          $("#progress-bar")
            .css("width", progress + "%")
            .attr("aria-valuenow", progress);
          $("#step-counter").text(`Step ${currentStep + 1} of ${totalSteps}`);
          $("#progress-percent").text(`${Math.round(progress)}% Complete`);
        }

        function updateStepButtons() {
          const maxCompletedStep = Math.max(...completedSteps, currentStep);
          $("#step-buttons button").each(function (index) {
            $(this).removeClass("active completed disabled");
            if (index === currentStep) {
              $(this).addClass("active");
            } else if (completedSteps.includes(index)) {
              $(this).addClass("completed");
            } else if (index > maxCompletedStep) {
              $(this).addClass("disabled");
            }
          });
        }

        function handleSubmit() {
          updateFormData();
          console.log("Form submitted:", formData);
          // Here you would typically send the data to the server
          alert("Form submitted successfully!");
        }
      });
    </script>
  </body>
</html>
